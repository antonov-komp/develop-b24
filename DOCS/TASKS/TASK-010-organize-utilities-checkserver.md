# TASK-010: Организация утилит (перемещение checkserver.php)

**Дата создания:** 2025-12-20 23:15 (UTC+3, Брест)  
**Статус:** Новая  
**Приоритет:** Низкий  
**Исполнитель:** Bitrix24 Программист (Vanilla JS)

---

## Описание

Переместить утилиту `checkserver.php` из корня проекта в отдельную директорию `tools/` для лучшей организации структуры проекта. Файл используется только для отладки и проверки окружения, поэтому не должен находиться в корне приложения.

---

## Контекст

Файл `checkserver.php` — утилита для проверки сервера (проверка curl, прав доступа, создания файлов). Он используется только для отладки и не является частью основного функционала приложения.

В корне проекта должны находиться только:
- Точки входа (index.php, access-control.php, token-analysis.php)
- Конфигурационные файлы
- Страницы ошибок
- Библиотеки (crest.php)

Утилиты для отладки должны быть организованы в отдельной директории.

**Ссылка на анализ:** `DOCS/ANALYSIS/2025-12-20-file-structure-analysis.md`

---

## Модули и компоненты

**Перемещаемые файлы:**
- `APP-B24/checkserver.php` → `APP-B24/tools/checkserver.php`

**Создаваемые директории:**
- `APP-B24/tools/` — директория для утилит (если не существует)

**Обновляемые файлы:**
- `APP-B24/tools/checkserver.php` — обновить пути к `crest.php` (если требуется)

---

## Зависимости

**От каких задач зависит:**
- Нет (независимая задача)

**Какие задачи зависят от этой:**
- Нет

**Связь с другими задачами:**
- Связана с организацией структуры проекта

---

## Ступенчатые подзадачи

1. **Создание директории:**
   - Создать директорию `APP-B24/tools/` (если не существует)
   - Установить права доступа (775 для директории)

2. **Перемещение файла:**
   - Переместить `APP-B24/checkserver.php` в `APP-B24/tools/checkserver.php`
   - Обновить пути к `crest.php` в файле (если требуется):
     ```php
     require_once(__DIR__ . '/../crest.php');
     ```

3. **Проверка функциональности:**
   - Проверить, что утилита работает после перемещения
   - Убедиться, что пути к зависимостям корректны

4. **Обновление документации:**
   - Обновить `APP-B24/README.md` (если там упоминается `checkserver.php`)
   - Обновить анализ в `DOCS/ANALYSIS/2025-12-20-file-structure-analysis.md`
   - Добавить описание директории `tools/` в документацию

5. **Создание README для tools (опционально):**
   - Создать `APP-B24/tools/README.md` с описанием утилит

---

## Технические требования

**Структура директории:**
```
APP-B24/
├── tools/
│   ├── checkserver.php
│   └── README.md (опционально)
```

**Обновление путей:**
- Если `checkserver.php` использует `require_once(__DIR__ . '/crest.php')`, обновить на:
  ```php
  require_once(__DIR__ . '/../crest.php');
  ```

**Права доступа:**
- Директория `tools/`: 775
- Файл `tools/checkserver.php`: 664

---

## Критерии приёмки

- [ ] Директория `tools/` создана
- [ ] Файл `checkserver.php` перемещен в `tools/`
- [ ] Пути к зависимостям обновлены (если требуется)
- [ ] Утилита работает после перемещения
- [ ] Документация обновлена
- [ ] Структура проекта соответствует новой организации

---

## Тестирование

1. **Тестирование утилиты:**
   - Открыть `https://your-domain.com/APP-B24/tools/checkserver.php` в браузере
   - Должна отобразиться информация о проверке сервера
   - Проверить, что все проверки выполняются корректно

2. **Проверка путей:**
   - Убедиться, что `crest.php` подключается корректно
   - Проверить, что нет ошибок "file not found"

3. **Проверка функциональности:**
   - Проверить, что утилита выполняет все проверки:
     - Проверка curl
     - Проверка прав доступа
     - Проверка создания файлов

---

## Риски и митигация

**Риск:** Перемещение файла может сломать функциональность, если пути к зависимостям не обновлены.

**Митигация:**
- Тщательная проверка всех путей в файле
- Тестирование утилиты после перемещения
- Резервное копирование файла перед перемещением

**Риск:** Кто-то может использовать старый путь к файлу.

**Митигация:**
- Обновить документацию с новым путем
- Добавить информацию о перемещении в README

---

## История правок

- 2025-12-20 23:15 (UTC+3, Брест): Создана задача на основе анализа структуры файлов

---

**Связанные документы:**
- `DOCS/ANALYSIS/2025-12-20-file-structure-analysis.md` — анализ структуры файлов
- `APP-B24/README.md` — документация проекта

